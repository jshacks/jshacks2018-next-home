<DOCTYPE = html>

<head>
	<!-- <script type="text/javascript" src="facial_recognition.js" /> -->
	<script src="face-api.js"></script>
</head>

<body>
	<div>
		<img id="myImage" src="harry-meghan-15.jpg">
	</div>
	<canvas id="overlay">
		
	</canvas>
	<script type="text/javascript">
		// // get images from the folder
// const MODEL_URL = '/models'
//  faceapi.loadSsdMobilenetv1Model(MODEL_URL)
//  faceapi.loadFaceLandmarkModel(MODEL_URL)
//  faceapi.loadFaceRecognitionModel(MODEL_URL)

// // get infos about an input image
const input = document.getElementById('myImage')
let fullFaceDescriptions =  faceapi.detectAllFaces(input)
const detections =  faceapi.detectAllFaces(input)

// resize the detected boxes in case your displayed image has a different size then the original
const detectionsForSize = detections.map(det => det.forSize(input.width, input.height))
// draw them into a canvas
const canvas = document.getElementById('overlay')
canvas.width = input.width
canvas.height = input.height
faceapi.drawDetection(canvas, detectionsForSize, { withScore: true })

// // put some labels on images/faces
// const labels = ['image_1', 'image_2', 'image_3', 'image_4']

// const labeledFaceDescriptors =  Promise.all(
// 	labels.map(async label => {
// 		const imgUrl = '${label}.png'
// 		const img =  faceapi.fetchImage(imgUrl)

// 		const fullFaceDescription =  faceapi.detectSingleFace(img).withFaceLandmarks().withFaceDescriptor()

// 		if(!fullFaceDescription) {
// 			throw new Error('No faces detected for ${label}')
// 		}

// 		const faceDescriptors = [fullFaceDescription.descriptor]
// 		return new faceapi.LabeledFaceDescriptors(label, faceDescriptors)
// 	})
// )

// // draw some rectangles and some infos around the faces
// const boxesWithText = results.map((bestMatch, i) => {
// 	const box = fullFaceDescriptions[i].detection.box
// 	const text = bestMatch.toString()
// 	const boxWithText = new faceapi.BoxWithText(box, text)
// })

// faceapi.drawDetection(canvas, boxesWithText)

// // draw only rectangle of detected faces
// const detectionsArray = fullFaceDescriptions.map(fd => fd.detection)
// faceapi.drawDetection(canvas, detectionsArray, { withScore: true })

// // recognition
// const maxDescriptorDistance = 0.6
// const faceMatcher = new faceapi.FaceMatcher(labeledFaceDescriptors, maxDescriptorDistance)

// const results = fullFaceDescriptions.map(fd => faceMatcher.findBestMatch(fd.descriptor))
	</script>
</body>

<footer>
</footer>

</html>